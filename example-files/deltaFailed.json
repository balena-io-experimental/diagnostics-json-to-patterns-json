{
    "type": "object",
    "properties": {
        "deltaFailedRegex": {
            "description": "Finding delta failed with a regex",
            "$$formula": "/Delta failed/.test(contract['journalctl --no-pager --no-hostname -n 200 -a -u balena'])"
        },
        "deltaFailedAndEngineECONNREFUSED": {
            "allOf": [
                {
                    "$$formula": "/Delta failed/.test(contract['journalctl --no-pager --no-hostname -n 200 -a -u balena'])"
                },
                {
                    "$$formula": "/connect ECONNREFUSED \\/var\\/run\\/balena-engine.sock/.test(contract['journalctl --no-pager --no-hostname -n 200 -a -u balena'])"
                }
            ]
        },
        "deltaFailedFind": {
            "$$formula": "FIND('Delta failed', contract['journalctl --no-pager --no-hostname -n 200 -a -u balena']) != 0"
        },
        "deltaFailedIncludes": {
            "$$formula": "contract['journalctl --no-pager --no-hostname -n 200 -a -u balena'].includes('Delta failed')"
        }
    }
}